<div class="portfolio-container">
  <div class="portfolio-header">
    <h1 class="portfolio-title">Portfolio</h1>
    <p class="portfolio-subtitle">Projekty i doświadczenie zawodowe</p>
  </div>

  <div class="project-navigation segmented-circle">
    <svg viewBox="0 0 400 400" width="100%" style="max-width:400px; height:auto;">
      <defs>
        <pattern id="img-project1" patternUnits="userSpaceOnUse" width="200" height="200">
          <image href="assets/images/cinkciarz/logo.jpg" x="-70" y="-30" width="300" height="300"/>
        </pattern>
        <pattern id="img-project2" patternUnits="userSpaceOnUse" width="400" height="400">
          <image href="assets/images/goldenTag/logo.jpg" x="130" y="130" width="300" height="300"/>
        </pattern>
        <pattern id="img-project3" patternUnits="userSpaceOnUse" width="400" height="400">
          <image href="assets/images/WWart/logo.jpg" x="-30" y="120" width="300" height="350"/>
        </pattern>
      </defs>
      <g>
        <path
          d="M200,200 L200,60 A140,140 0 0,1 340,200 L300,200 A100,100 0 0,0 200,100 Z"
          fill="#27AE60" stroke="#111" stroke-width="8"
          class="segment-base"
          [ngClass]="{'segment-hidden': isDesktop() && hoveredSegment === 1}"
        />
        <path
          [attr.d]="
          isMobile()
            ? 'M200,200 L200,30 A170,170 0 0,1 370,200 L280,200 A80,80 0 0,0 200,120 Z'
            : hoveredSegment === 1
              ? 'M200,200 L200,30 A170,170 0 0,1 370,200 L280,200 A80,80 0 0,0 200,120 Z'
              : 'M200,200 L200,60 A140,140 0 0,1 340,200 L300,200 A100,100 0 0,0 200,100 Z'
        "
          fill="url(#img-project1)" stroke="#111" stroke-width="8"
          class="segment-image"
          [ngClass]="{'segment-expanded': isMobile() || hoveredSegment === 1}"
          (mouseenter)="isDesktop() ? hoveredSegment = 1 : null"
          (mouseleave)="isDesktop() ? hoveredSegment = null : null"
          (click)="selectProject(projects[0].id)" cursor="pointer"
        />
      </g>
      <g>
        <path
          d="M200,200 L340,200 A140,140 0 0,1 200,340 L200,300 A100,100 0 0,0 300,200 Z"
          fill="#27AE60" stroke="#111" stroke-width="8"
          class="segment-base"
          [ngClass]="{'segment-hidden': isDesktop() && hoveredSegment === 2}"
        />
        <path
          [attr.d]="
          isMobile()
            ? 'M200,200 L370,200 A170,170 0 0,1 200,370 L200,280 A80,80 0 0,0 280,200 Z'
            : hoveredSegment === 2
              ? 'M200,200 L370,200 A170,170 0 0,1 200,370 L200,280 A80,80 0 0,0 280,200 Z'
              : 'M200,200 L340,200 A140,140 0 0,1 200,340 L200,300 A100,100 0 0,0 300,200 Z'
        "
          fill="url(#img-project2)" stroke="#111" stroke-width="8"
          class="segment-image"
          [ngClass]="{'segment-expanded': isMobile() || hoveredSegment === 2}"
          (mouseenter)="isDesktop() ? hoveredSegment = 2 : null"
          (mouseleave)="isDesktop() ? hoveredSegment = null : null"
          (click)="selectProject(projects[1].id)" cursor="pointer"
        />
      </g>
      <g>
        <path
          d="M200,200 L200,340 A140,140 0 0,1 60,200 L100,200 A100,100 0 0,0 200,300 Z"
          fill="#27AE60" stroke="#111" stroke-width="8"
          class="segment-base"
          [ngClass]="{'segment-hidden': isDesktop() && hoveredSegment === 3}"
        />
        <path
          [attr.d]="
          isMobile()
            ? 'M200,200 L200,370 A170,170 0 0,1 30,200 L120,200 A80,80 0 0,0 200,280 Z'
            : hoveredSegment === 3
              ? 'M200,200 L200,370 A170,170 0 0,1 30,200 L120,200 A80,80 0 0,0 200,280 Z'
              : 'M200,200 L200,340 A140,140 0 0,1 60,200 L100,200 A100,100 0 0,0 200,300 Z'
        "
          fill="url(#img-project3)" stroke="#111" stroke-width="8"
          class="segment-image"
          [ngClass]="{'segment-expanded': isMobile() || hoveredSegment === 3}"
          (mouseenter)="isDesktop() ? hoveredSegment = 3 : null"
          (mouseleave)="isDesktop() ? hoveredSegment = null : null"
          (click)="selectProject(projects[2].id)" cursor="pointer"
        />
      </g>
      <circle cx="200" cy="200" r="85" fill="#121212"/>
    </svg>
  </div>

  <div class="project-content">
    <div class="project-overview">
      <div class="project-info">
        <h2 class="project-title">{{ currentProject.title }}</h2>
        <ul class="project-description">
          <li *ngFor="let point of currentProject.descriptionPoints">{{ point }}</li>
        </ul>
        <div class="project-technologies">
          <h3>Technologie</h3>
          <div class="tech-tags">
            <span *ngFor="let tech of currentProject.technologies" class="tech-tag">{{ tech }}</span>
          </div>
        </div>

        <div class="project-link" *ngIf="currentProject.link">
          <a [href]="currentProject.link" target="_blank" class="btn btn-primary">
            <i class="fas fa-external-link-alt"></i> Zobacz projekt
          </a>
        </div>
      </div>

      <div class="project-images">
        <div class="image-grid">
          <div *ngFor="let image of currentProject.images; let i = index"
               class="image-container" (click)="openImage(image)">
            <img [src]="image" [alt]="currentProject.company + ' screenshot ' + (i+1)" class="project-image"/>
            <div class="image-overlay"><i class="fas fa-search-plus"></i></div>
          </div>
        </div>
      </div>
    </div>

    <div class="project-features">
      <h3>Kluczowe funkcjonalności</h3>
      <div class="features-grid">
        <div *ngFor="let feature of currentProject.features" class="feature-item">
          <i class="fas fa-check-circle"></i> <span>{{ feature }}</span>
        </div>
      </div>
    </div>

    <div class="project-achievements">
      <h3>Osiągnięcia</h3>
      <div class="achievements-list">
        <div *ngFor="let achievement of currentProject.achievements" class="achievement-item">
          <i class="fas fa-trophy"></i> <span>{{ achievement }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="selectedImage" class="lightbox" (click)="closeImage()">
  <img [src]="selectedImage" alt="Powiększone zdjęcie" class="lightbox-image"/>
  <button class="lightbox-close" (click)="closeImage(); $event.stopPropagation();">&times;</button>
</div>
